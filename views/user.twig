{% extends "layout/layout.twig" %}

{% block content %}

    <div class="container-fluid">
        <div class="row ct-bg-grey">
            <div class="col-md-offset-2 col-md-6">
                <h2 class="ct-txt-yellow" >
                    {{ __("REGISTRATION") }}
                </h2>
                <p class="ct-txt-white">(*) {{ __("REQUIREDFIELDS") }}</p>
                <form action="" id="registrationForm" method="post" encType="multipart/form-data">
                    <div class="form-group">
                        <label class="ct-txt-white" for="firstname">{{ __("FIRSTNAME") }} * : </label>
                        <input type="text" name="firstname" class="form-control" id="firstname" placeholder="{{ __("FIRSTNAME") }}" minlength="3" maxlength="20" value="{{ user.firstname }}" required>
                    </div>
                    <div class="form-group">
                        <label class="ct-txt-white" for="lastname">{{ __("LASTNAME") }} * : </label>
                        <input type="text" name="lastname" class="form-control" id="lastname" placeholder="{{ __("LASTNAME") }}" minlength="3" maxlength="20" value="{{ user.lastname }}" required>
                    </div>
                    <div class="form-group">
                        <label class="ct-txt-white" for="pseudo">{{ __("PSEUDO") }} * : </label>
                        <input type="text" name="pseudo" class="form-control" id="pseudo" placeholder="{{ __("PSEUDO") }}" minlength="3" maxlength="20" value="{{ user.pseudo }}" required>
                    </div>
                    <div class="form-group">
                        <label class="ct-txt-white" for="birthday">{{ __("BDAY") }} * : </label>
                        <div class="input-group date" id="datetimepicker">
                            <input type="text" name="birthday" class="form-control" id="birthday" placeholder="jj/mm/aaaa" required>
                            <span class="input-group-addon">
                                <span class="glyphicon glyphicon-calendar">
                                </span>
                            </span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="ct-txt-white" for="mail">{{ __("MAIL") }} * : </label>
                        <input type="email" name="mail" class="form-control" id="mail" placeholder="{{ __("MAIL") }}" value="{{ user.mail }}" required>
                    </div>
                    <div class="form-group">
                        <label class="ct-txt-white" for="pass">{{ __("PASSWORD") }} * : </label>
                        <input type="password" name="password" class="form-control" id="password" placeholder="{{ __("PASSWORD") }}" minlength="3" maxlength="20" required>
                    </div>
                    <div class="form-group">
                        <label class="ct-txt-white" for="passConf">{{ __("PASSWORD_CONF") }} * : </label>
                        <input type="password" name="passwordConf" class="form-control" id="passwordConf" placeholder="{{ __("PASSWORD_CONF") }}" minlength="3" maxlength="20" required>
                    </div>
                    <div id="passCheck" class="ct-txt-red" ><p>{{ __("PASSMUSTBEEQUAL") }}</p></div>
                    <div class="form-group">
                        <label class="ct-txt-white" for="langId">{{ __("LANG") }} : </label>
                        <select name="langId" class="form-control" id="langId">
                            <option value="1" {% if user.langId == 1 %}selected{% endif %}>{{ __("LANG_FR") }}</option>
                            <option value="2" {% if user.langId == 2 %}selected{% endif %}>{{ __("LANG_EN") }}</option>
                        </select>
                    </div>
                    <input class="btn" type="submit" value="{{ __("REGISTER") }}">
                </form>

            </div>
        </div>
    </div>
    <script type="text/javascript" src="js/passCheck.js"></script>
    <script type="text/javascript">
        //get host
        var fullPath = document.location.href;
        var host = fullPath.substring( 0 ,fullPath.lastIndexOf( "/" ) );

        //get birthday
        var birthday = "";
        $.getJSON(host + '/api/user/data', function(data) {
            if(data.birthday){
                birthday = data.birthday;
            }
        });
        console.log(birthday)

        //format datepicker plugin
        $(function () {
            $("#datetimepicker").datetimepicker({
                defaultDate: birthday,
                viewMode: 'years',
                format: "YYYY/MM/DD"
            });
        });
    </script>

{% endblock %}